{
  "hash": "12cfd7352bf9ddd0e1a26095c932909e",
  "result": {
    "markdown": "---\ntitle: \"Minnesota State High School Boys Hockey Predictions (Updated Quarterfinals)\"\nauthor: \"~\"\ndate: 2018-03-08\ncategoriess: [\"Hockey\", \"Elo\", \"R\"]\n---\n\n\nIn a [previous post](/post/2018-03-03-boys-hockey/), I used Monte Carlo simulation to predict the winner of the 2018 Minnesota State High School Boys Hockey tournament. Now that the quarterfinal games have been played, I thought I would update my predictions. The process for this is to: \n\n- Update the Elo ratings based on the quarterfinal games;\n- Re-simulate the tournament \n\nI simulated the Class A state tournament 10,000 times using the same process as described in my [previous post](/post/2018-03-03-boys-hockey/).\n\n\n## Class A Tournament\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n::: {.cell-output-display}\nTable: Original (at beginning of tournament) and updated Elo ratings (after the quartefinal games) for the eight Class A teams that qualified for the state tournament.\n\n|Team                     | Original Elo | Updated Elo |\n|:------------------------|:------------:|:-----------:|\n|Hermantown               |   1639.196   |  1657.756   |\n|Orono                    |   1624.538   |  1624.505   |\n|Mahtomedi                |   1609.513   |  1619.517   |\n|Alexandria               |   1587.179   |  1571.723   |\n|Monticello               |   1571.198   |  1569.096   |\n|Thief River Falls        |   1562.803   |  1568.797   |\n|Mankato East             |   1551.141   |  1549.453   |\n|Litchfield/Dassel-Cokato |   1530.773   |  1515.494   |\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Enter teams in rank order\nteam_1 = \"Hermantown\"\nteam_2 = \"Mahtomedi\"\nteam_3 = \"Orono\"\nteam_4 = \"Alexandria\"\n\n\n# Set up empty vector to store winner in\nchampion = rep(NA, 10000)\n\n\nfor(i in 1:10000){\n  \n  ### SIMULATE THE SEMIFINALS\n  \n  # Predict Game 1 winner: team_1 vs. team_4\n  p_game_1 = predict(elo_reg_season, data.frame(home = team_1, visitor = team_4))\n  w_game_1 = ifelse(runif(1, min = 0, max = 1) <= p_game_1, team_1, team_4)\n  \n  # Predict Game 2 winner: team_2 vs. team_3\n  p_game_2 = predict(elo_reg_season, data.frame(home = team_2, visitor = team_3))\n  w_game_2 = ifelse(runif(1, min = 0, max = 1) <= p_game_2, team_2, team_3)\n  \n  \n  ### SIMULATE THE FINALS\n  \n  # Predict Game 3 winner: winner Game 1 vs. winner Game 2\n  p_game_3 = predict(elo_reg_season, data.frame(home = w_game_1, visitor = w_game_2))\n  w_game_3 = ifelse(runif(1, min = 0, max = 1) <= p_game_3, w_game_1, w_game_2)\n  \n  \n  champion[i] = w_game_3\n  \n}\n```\n:::\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n::: {.cell-output-display}\nTable: Probability that each of the eight Class A teams will win the state tournament.\n\n|Team                     | Original Probability |Updated Probability |\n|:------------------------|:--------------------:|:-------------------|\n|Hermantown               |        0.1987        |0.3214              |\n|Orono                    |        0.1802        |0.2671              |\n|Mahtomedi                |        0.1127        |0.2415              |\n|Alexandria               |        0.1086        |0.1700              |\n|Monticello               |        0.1127        |0.0000              |\n|Thief River Falls        |        0.0939        |0.0000              |\n|Mankato East             |        0.0812        |0.0000              |\n|Litchfield/Dassel-Cokato |        0.0635        |0.0000              |\n:::\n:::\n\n\nBased on these simulations, Hermantown is still the favorite, and Mahtomedi and Orono also have a chance of winning the Class A tournament. \n\n## Class AA Tournament\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n::: {.cell-output-display}\nTable: Elo ratings and rankings for the eight Class AA teams that qualified for the state tournament.\n\n|Team               | Original Elo | Updated Elo |\n|:------------------|:------------:|:-----------:|\n|Edina              |   1718.589   |  1741.221   |\n|Minnetonka         |   1716.570   |  1711.781   |\n|St. Thomas Academy |   1691.315   |  1710.036   |\n|Duluth East        |   1693.757   |  1692.917   |\n|STMA               |   1655.561   |  1643.501   |\n|Centennial         |   1625.291   |  1618.199   |\n|Lakeville North    |   1578.414   |  1569.408   |\n|Hill-Murray        |   1557.501   |  1549.936   |\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Enter teams in rank order\nteam_1 = \"Minnetonka\"\nteam_2 = \"Edina\"\nteam_3 = \"Duluth East\"\nteam_4 = \"Centennial\"\n\n\n# Set up empty vector to store winner in\nchampion = rep(NA, 10000)\n\n\nfor(i in 1:10000){\n  \n  ### SIMULATE THE SEMIFINALS\n  \n  # Predict Game 1 winner: team_1 vs. team_4\n  p_game_1 = predict(elo_reg_season, data.frame(home = team_1, visitor = team_4))\n  w_game_1 = ifelse(runif(1, min = 0, max = 1) <= p_game_1, team_1, team_4)\n  \n  # Predict Game 2 winner: team_2 vs. team_3\n  p_game_2 = predict(elo_reg_season, data.frame(home = team_2, visitor = team_3))\n  w_game_2 = ifelse(runif(1, min = 0, max = 1) <= p_game_2, team_2, team_3)\n  \n  \n  ### SIMULATE THE FINALS\n  \n  # Predict Game 3 winner: winner Game 1 vs. winner Game 2\n  p_game_3 = predict(elo_reg_season, data.frame(home = w_game_1, visitor = w_game_2))\n  w_game_3 = ifelse(runif(1, min = 0, max = 1) <= p_game_3, w_game_1, w_game_2)\n  \n  \n  champion[i] = w_game_3\n  \n}\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\nTable: Probability that each of the eight Class AA teams will win the state tournament.\n\n|Team               | Original Probability |Updated Probability |\n|:------------------|:--------------------:|:-------------------|\n|Edina              |        0.2083        |0.3113              |\n|Minnetonka         |        0.1852        |0.2901              |\n|St. Thomas Academy |        0.1495        |0.2487              |\n|Duluth East        |        0.0701        |0.1499              |\n|STMA               |        0.2098        |0.0000              |\n|Centennial         |        0.1016        |0.0000              |\n|Lakeville North    |        0.0416        |0.0000              |\n|Hill-Murray        |        0.0339        |0.0000              |\n:::\n:::\n\n\nSt. Thomas Academy's loss to Centennial really shook things up. Edina and Minnetonka are now the favorites in the Class AA tournament, with Duluth East a not so distant third.\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}