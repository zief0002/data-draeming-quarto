<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Andy">
<meta name="dcterms.date" content="2020-01-18">

<title>Andrew Zieffler - APA Tables using RMarkdown: Part 5</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital@0;1&amp;display=swap" rel="stylesheet">  

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Andrew Zieffler</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../contact.html" rel="" target="">
 <span class="menu-text">Contact</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://datadreaming.org/files/zieffler-cv.pdf" rel="" target="">
 <span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../publications.html" rel="" target="">
 <span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../teaching.html" rel="" target="">
 <span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html" rel="" target="">
 <span class="menu-text">Blog</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">APA Tables using RMarkdown: Part 5</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Markdown</div>
                <div class="quarto-category">R</div>
                <div class="quarto-category">Writing</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Andy </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 18, 2020</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#my-process" id="toc-my-process" class="nav-link active" data-scroll-target="#my-process">My Process</a>
  <ul class="collapse">
  <li><a href="#customizing-the-stargazer-output" id="toc-customizing-the-stargazer-output" class="nav-link" data-scroll-target="#customizing-the-stargazer-output">Customizing the Stargazer Output</a></li>
  <li><a href="#adding-additional-model-level-statistics-into-the-table" id="toc-adding-additional-model-level-statistics-into-the-table" class="nav-link" data-scroll-target="#adding-additional-model-level-statistics-into-the-table">Adding Additional Model-Level Statistics into the Table</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">



<p>./assets/body-header.qmd</p>
<p>This is the fifth part of a short blog series I am writing to re-create some of the sample tables found in the 7th edition <em>APA Publication Manual</em>. In this post I will attempt to show how to create a table to present the results of several fitted models. (This type of table is not among the example tables in the 7th edition <em>APA Publication Manual</em>.) To do so, I will incorporate many ideas that I covered in the <a href="https://www.datadreaming.org/post/apa-tables-using-rmarkdown/">first</a>, <a href="https://www.datadreaming.org/post/apa-tables-using-rmarkdown-part-2/">second</a>, <a href="https://www.datadreaming.org/post/apa-tables-using-rmarkdown-part-3/">third</a> and <a href="https://www.datadreaming.org/post/apa-tables-using-rmarkdown-part-4/">fourth</a> of these posts.</p>
<section id="my-process" class="level1">
<h1>My Process</h1>
<p>I will again render to PDF and set up the YAML to import the <strong>caption</strong> package (LaTeX) and set up the APA caption formatting.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"Untitled"</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">"Andrew Zieffler"</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">date</span><span class="kw">:</span><span class="at"> </span><span class="st">"1/12/2020"</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> pdf_document</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">header-includes</span><span class="kw">:</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="kw">-</span><span class="at"> \usepackage{caption}</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="at">   </span><span class="kw">-</span><span class="at"> \captionsetup[table]{textfont={it}, labelfont={bf}, singlelinecheck=false, labelsep=newline}</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In the RMarkdown body, I will load a few packages and also import a data set that I will use to fit the models.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load libraries</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Import data</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>mn <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">"https://raw.githubusercontent.com/zief0002/rustic-penguin/main/data/mn-schools.csv"</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">public =</span> <span class="fu">if_else</span>(sector <span class="sc">==</span> <span class="st">"Public"</span>, <span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># View data</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  name                               grad sector    sat tuition public
  &lt;chr&gt;                             &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
1 Augsburg College                   65.2 Private  1030    39.3      0
2 Bethany Lutheran College           52.6 Private  1065    30.5      0
3 Bethel University, Saint Paul, MN  73.3 Private  1145    39.4      0
4 Carleton College                   92.6 Private  1400    54.3      0
5 College of Saint Benedict          81.1 Private  1185    43.2      0
6 Concordia College at Moorhead      69.4 Private  1145    36.6      0</code></pre>
</div>
</div>
<p>The data in were collected from http://www.collegeresults.org and contain 2011 institutional data for n=33 Minnesota colleges and universities. The codebook is available <a href="http://zief0002.github.io/rustic-penguin/codebooks/mn-schools.html">here</a>.</p>
<p>We need to compute the regression results from fitting an OLS model. Here I will predict variation in graduation rates using several potential competing models.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit models</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>lm<span class="fl">.1</span> <span class="ot">=</span> <span class="fu">lm</span>(grad <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> public <span class="sc">+</span> sat <span class="sc">+</span> tuition, <span class="at">data =</span> mn)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>lm<span class="fl">.2</span> <span class="ot">=</span> <span class="fu">lm</span>(grad <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> public <span class="sc">+</span> sat <span class="sc">+</span> tuition <span class="sc">+</span> public<span class="sc">:</span>sat, <span class="at">data =</span> mn)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>lm<span class="fl">.3</span> <span class="ot">=</span> <span class="fu">lm</span>(grad <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> public <span class="sc">+</span> sat <span class="sc">+</span> tuition <span class="sc">+</span> public<span class="sc">:</span>tuition, <span class="at">data =</span> mn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>There are several packages that can be used to present the results of one or more fitted models. These include <a href="https://cran.r-project.org/web/packages/stargazer/vignettes/stargazer.pdf">stargazer</a>, <a href="https://github.com/leifeld/texreg">texreg</a>, and <a href="https://github.com/vincentarelbundock/modelsummary">modelsummary</a> among others. In this post I will focus on using the <strong>stargazer</strong> package, which I have found works well for fixed-effects models.</p>
<p>After loading the <strong>stagazer</strong> package, the <code>stargazer()</code> function can be used to create a basic table of regression results. The <code>type=</code> argument defaults to <code>latex</code>, so if you are rendering to an HTML document, you need to change this to <code>type="html"</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stargazer)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Output model results in a table</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">stargazer</span>(lm<span class="fl">.1</span>, lm<span class="fl">.2</span>, lm<span class="fl">.3</span>, <span class="at">type =</span> <span class="st">"latex"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
% Table created by stargazer v.5.2.3 by Marek Hlavac, Social Policy Institute. E-mail: marek.hlavac at gmail.com
% Date and time: Tue, Oct 31, 2023 - 18:00:09
\begin{table}[!htbp] \centering 
  \caption{} 
  \label{} 
\begin{tabular}{@{\extracolsep{5pt}}lccc} 
\\[-1.8ex]\hline 
\hline \\[-1.8ex] 
 &amp; \multicolumn{3}{c}{\textit{Dependent variable:}} \\ 
\cline{2-4} 
\\[-1.8ex] &amp; \multicolumn{3}{c}{grad} \\ 
\\[-1.8ex] &amp; (1) &amp; (2) &amp; (3)\\ 
\hline \\[-1.8ex] 
 public &amp; $-$0.647 &amp; 9.132 &amp; 8.554 \\ 
  &amp; (4.716) &amp; (32.466) &amp; (19.945) \\ 
  &amp; &amp; &amp; \\ 
 sat &amp; 0.104$^{***}$ &amp; 0.106$^{***}$ &amp; 0.106$^{***}$ \\ 
  &amp; (0.016) &amp; (0.018) &amp; (0.017) \\ 
  &amp; &amp; &amp; \\ 
 tuition &amp; 0.470$^{*}$ &amp; 0.451$^{*}$ &amp; 0.455$^{*}$ \\ 
  &amp; (0.242) &amp; (0.253) &amp; (0.247) \\ 
  &amp; &amp; &amp; \\ 
 public:sat &amp;  &amp; $-$0.009 &amp;  \\ 
  &amp;  &amp; (0.031) &amp;  \\ 
  &amp; &amp; &amp; \\ 
 public:tuition &amp;  &amp;  &amp; $-$0.487 \\ 
  &amp;  &amp;  &amp; (1.025) \\ 
  &amp; &amp; &amp; \\ 
 Constant &amp; $-$68.297$^{***}$ &amp; $-$70.205$^{***}$ &amp; $-$70.578$^{***}$ \\ 
  &amp; (12.564) &amp; (14.220) &amp; (13.610) \\ 
  &amp; &amp; &amp; \\ 
\hline \\[-1.8ex] 
Observations &amp; 33 &amp; 33 &amp; 33 \\ 
R$^{2}$ &amp; 0.861 &amp; 0.861 &amp; 0.862 \\ 
Adjusted R$^{2}$ &amp; 0.846 &amp; 0.841 &amp; 0.842 \\ 
Residual Std. Error &amp; 6.562 (df = 29) &amp; 6.667 (df = 28) &amp; 6.651 (df = 28) \\ 
F Statistic &amp; 59.732$^{***}$ (df = 3; 29) &amp; 43.421$^{***}$ (df = 4; 28) &amp; 43.660$^{***}$ (df = 4; 28) \\ 
\hline 
\hline \\[-1.8ex] 
\textit{Note:}  &amp; \multicolumn{3}{r}{$^{*}$p$&lt;$0.1; $^{**}$p$&lt;$0.05; $^{***}$p$&lt;$0.01} \\ 
\end{tabular} 
\end{table} </code></pre>
</div>
</div>
<p>The function outputs raw LaTeX (or HTML), so to get it to form into a table you need to include <code>results='asis'</code> in your Rmarkdown chunk.</p>
<pre><code>```{r message=FALSE, results='asis'} 
# Load library
library(stargazer)

# Output model results in a table
stargazer(lm.1, lm.2, lm.3, type = "latex")
```</code></pre>
<p><img src="stargazer-tbl.png" class="img-fluid" style="width:100.0%"></p>
<section id="customizing-the-stargazer-output" class="level3">
<h3 class="anchored" data-anchor-id="customizing-the-stargazer-output">Customizing the Stargazer Output</h3>
<p>There are several arguments in the <code>stargazer()</code> function to customize the table.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stargazer</span>(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  lm<span class="fl">.1</span>, lm<span class="fl">.2</span>, lm<span class="fl">.3</span>,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">"latex"</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">table.placement =</span> <span class="st">"H"</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"Three Regression Models Predicting Variation in Six-Year Graduation Rates"</span>,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">column.labels =</span> <span class="fu">c</span>(<span class="st">"Model A"</span>, <span class="st">"Model B"</span>, <span class="st">"Model C"</span>),</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">colnames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">model.numbers =</span> <span class="cn">FALSE</span>,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">dep.var.caption =</span> <span class="st">" "</span>,</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">dep.var.labels =</span> <span class="st">"Graduation Rate"</span>,</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">covariate.labels =</span> <span class="fu">c</span>(<span class="st">"Public$^a$"</span>, <span class="st">"Median SAT score"</span>, <span class="st">"Tuition"</span>, <span class="st">"Public$^a$ x Median SAT score"</span>, <span class="st">"Public$^a$ x Tuition"</span>),</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">star.cutoffs =</span> <span class="cn">NA</span>,</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">keep.stat =</span> <span class="fu">c</span>(<span class="st">"rsq"</span>, <span class="st">"f"</span>),</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">notes =</span> <span class="st">"$^a$0 = Private institution and 1 = Public institution."</span>,</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">notes.align =</span> <span class="st">"l"</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="tbl-2.png" class="img-fluid" style="width:100.0%"></p>
<p>This is close, but there are a few things I am not happy with. Namely,</p>
<ul>
<li>The table should be aligned with the caption rather than centered.</li>
<li>The double lines produced at the top and bottom of the table.</li>
<li>The label for the dependent variable, “Graduation Rate”, is redundant with the caption so could be omitted, as could the border produced above it.</li>
<li>The note is separated from the <em>Note:</em> text and uses a colon rather than a period in this text. It also has the text “NA” since we set the <code>star.cutoff=</code> argument (which omits the dreaded significance stars) to <code>NA</code>.</li>
</ul>
<p>To fix these things we need to edit the LaTeX syntax that is produced by the <code>stargazer()</code> function. To do this, run the syntax in the console and then copy-and-paste the raw LaTeX into your RMarkdown document (outside of a code chunk). The LaTeX syntax from our table is:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode latex code-with-copy"><code class="sourceCode latex"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">table</span>}[H] <span class="fu">\centering</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">\caption</span>{Three Regression Models Predicting Variation in Six-Year Graduation Rates} </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">\label</span>{} </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">tabular</span>}{<span class="ch">@{\extracolsep{5pt}}</span>lccc} </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">\\</span>[-1.8ex]<span class="fu">\hline</span> </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="fu">\hline</span> <span class="fu">\\</span>[-1.8ex] </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a> <span class="op">&amp;</span> <span class="fu">\multicolumn</span>{3}{c}{ } <span class="fu">\\</span> </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="fu">\cline</span>{2-4} </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="fu">\\</span>[-1.8ex] <span class="op">&amp;</span> <span class="fu">\multicolumn</span>{3}{c}{Graduation Rate} <span class="fu">\\</span> </span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a> <span class="op">&amp;</span> Model A <span class="op">&amp;</span> Model B <span class="op">&amp;</span> Model C <span class="fu">\\</span> </span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="fu">\hline</span> <span class="fu">\\</span>[-1.8ex] </span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a> Public<span class="ss">$^a$</span> <span class="op">&amp;</span> <span class="ss">$-$</span>0.647 <span class="op">&amp;</span> 9.132 <span class="op">&amp;</span> 8.554 <span class="fu">\\</span> </span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  <span class="op">&amp;</span> (4.716) <span class="op">&amp;</span> (32.466) <span class="op">&amp;</span> (19.945) <span class="fu">\\</span> </span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>  <span class="op">&amp;</span> <span class="op">&amp;</span> <span class="op">&amp;</span> <span class="fu">\\</span> </span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a> Median SAT score <span class="op">&amp;</span> 0.104 <span class="op">&amp;</span> 0.106 <span class="op">&amp;</span> 0.106 <span class="fu">\\</span> </span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  <span class="op">&amp;</span> (0.016) <span class="op">&amp;</span> (0.018) <span class="op">&amp;</span> (0.017) <span class="fu">\\</span> </span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  <span class="op">&amp;</span> <span class="op">&amp;</span> <span class="op">&amp;</span> <span class="fu">\\</span> </span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a> Tuition <span class="op">&amp;</span> 0.470 <span class="op">&amp;</span> 0.451 <span class="op">&amp;</span> 0.455 <span class="fu">\\</span> </span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>  <span class="op">&amp;</span> (0.242) <span class="op">&amp;</span> (0.253) <span class="op">&amp;</span> (0.247) <span class="fu">\\</span> </span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>  <span class="op">&amp;</span> <span class="op">&amp;</span> <span class="op">&amp;</span> <span class="fu">\\</span> </span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a> Public<span class="ss">$^a$</span> x Median SAT score <span class="op">&amp;</span>  <span class="op">&amp;</span> <span class="ss">$-$</span>0.009 <span class="op">&amp;</span>  <span class="fu">\\</span> </span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>  <span class="op">&amp;</span>  <span class="op">&amp;</span> (0.031) <span class="op">&amp;</span>  <span class="fu">\\</span> </span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>  <span class="op">&amp;</span> <span class="op">&amp;</span> <span class="op">&amp;</span> <span class="fu">\\</span> </span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a> Public<span class="ss">$^a$</span> x Tuition <span class="op">&amp;</span>  <span class="op">&amp;</span>  <span class="op">&amp;</span> <span class="ss">$-$</span>0.487 <span class="fu">\\</span> </span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>  <span class="op">&amp;</span>  <span class="op">&amp;</span>  <span class="op">&amp;</span> (1.025) <span class="fu">\\</span> </span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>  <span class="op">&amp;</span> <span class="op">&amp;</span> <span class="op">&amp;</span> <span class="fu">\\</span> </span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a> Constant <span class="op">&amp;</span> <span class="ss">$-$</span>68.297 <span class="op">&amp;</span> <span class="ss">$-$</span>70.205 <span class="op">&amp;</span> <span class="ss">$-$</span>70.578 <span class="fu">\\</span> </span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>  <span class="op">&amp;</span> (12.564) <span class="op">&amp;</span> (14.220) <span class="op">&amp;</span> (13.610) <span class="fu">\\</span> </span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>  <span class="op">&amp;</span> <span class="op">&amp;</span> <span class="op">&amp;</span> <span class="fu">\\</span> </span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a><span class="fu">\hline</span> <span class="fu">\\</span>[-1.8ex] </span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>R<span class="ss">$^{2}$</span> <span class="op">&amp;</span> 0.861 <span class="op">&amp;</span> 0.861 <span class="op">&amp;</span> 0.862 <span class="fu">\\</span> </span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>F Statistic <span class="op">&amp;</span> 59.732 (df = 3; 29) <span class="op">&amp;</span> 43.421 (df = 4; 28) <span class="op">&amp;</span> 43.660 (df = 4; 28) <span class="fu">\\</span> </span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a><span class="fu">\hline</span> </span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a><span class="fu">\hline</span> <span class="fu">\\</span>[-1.8ex] </span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a><span class="fu">\textit</span>{Note:}  <span class="op">&amp;</span> <span class="fu">\multicolumn</span>{3}{l}{NA} <span class="fu">\\</span> </span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a> <span class="op">&amp;</span> <span class="fu">\multicolumn</span>{3}{l}{<span class="ss">$^a$</span>0 = Private institution and 1 = Public institution.} <span class="fu">\\</span> </span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">tabular</span>} </span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">table</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>\centering</code> synatax in the first line is what is causing the table itself to be centered. Delete this. The double lines at the top and bottom of the table are produced by the two consecutive <code>hline</code> commands. Remove one at the beginning and end of the table. In a similar way the syntax that corresponds to the “Graduation Rate” label and the <code>\cline{2-4}</code> preceeding it can be omitted.</p>
<p>Changing the table note is a little more complicated. The primary syntax for this is the following:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode latex code-with-copy"><code class="sourceCode latex"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\textit</span>{Note:}  &amp; <span class="fu">\multicolumn</span>{3}{l}{NA} <span class="fu">\\</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a> &amp; <span class="fu">\multicolumn</span>{3}{l}{<span class="ss">$^a$</span>0 = Private institution and 1 = Public institution.} <span class="fu">\\</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In the syntax that creates the LaTeX table, the ampersand (<code>&amp;</code>) indicates a new column and the double slash (<code>\\</code>) indicates the end of the row. So the italicized text <em>Note:</em> is put in the first cell of the row and then the text “NA” is placed in the next cell of the same row. The <code>multicolumn{3}{l}{}</code> actually combines the last 3 columns into a single cell and aligns the text (which is placed in the third set of curly braces) to the left. To make this all line up better, we are going to replace the note syntax with the following:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode latex code-with-copy"><code class="sourceCode latex"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\multicolumn</span>{4}{l}{<span class="fu">\textit</span>{Note.} <span class="ss">$^a$</span>0 = Private institution and 1 = Public institution.} <span class="fu">\\</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This will combine all four columns of the table into a single cell and will align the text to the left of this cell. The resulting table will fix our issues. This is the syntax that is remaining:</p>
<pre><code>\begin{table}[H] 
  \caption{Three Regression Models Predicting Variation in Six-Year Graduation Rates} 
  \label{} 
\begin{tabular}{@{\extracolsep{5pt}}lccc} 
\\[-1.8ex]
\hline \\[-1.8ex] 
 &amp; \multicolumn{3}{c}{ } \\ 
 &amp; Model A &amp; Model B &amp; Model C \\ 
\hline \\[-1.8ex] 
 Public$^a$ &amp; $-$0.647 &amp; 9.132 &amp; 8.554 \\ 
  &amp; (4.716) &amp; (32.466) &amp; (19.945) \\ 
  &amp; &amp; &amp; \\ 
 Median SAT score &amp; 0.104 &amp; 0.106 &amp; 0.106 \\ 
  &amp; (0.016) &amp; (0.018) &amp; (0.017) \\ 
  &amp; &amp; &amp; \\ 
 Tuition &amp; 0.470 &amp; 0.451 &amp; 0.455 \\ 
  &amp; (0.242) &amp; (0.253) &amp; (0.247) \\ 
  &amp; &amp; &amp; \\ 
 Public$^a$ x Median SAT score &amp;  &amp; $-$0.009 &amp;  \\ 
  &amp;  &amp; (0.031) &amp;  \\ 
  &amp; &amp; &amp; \\ 
 Public$^a$ x Tuition &amp;  &amp;  &amp; $-$0.487 \\ 
  &amp;  &amp;  &amp; (1.025) \\ 
  &amp; &amp; &amp; \\ 
 Constant &amp; $-$68.297 &amp; $-$70.205 &amp; $-$70.578 \\ 
  &amp; (12.564) &amp; (14.220) &amp; (13.610) \\ 
  &amp; &amp; &amp; \\ 
\hline \\[-1.8ex] 
R$^{2}$ &amp; 0.861 &amp; 0.861 &amp; 0.862 \\ 
F Statistic &amp; 59.732 (df = 3; 29) &amp; 43.421 (df = 4; 28) &amp; 43.660 (df = 4; 28) \\ 
\hline \\[-1.8ex] 
\multicolumn{4}{l}{\textit{Note.} $^a$0 = Private institution and 1 = Public institution.} \\ 
\end{tabular} 
\end{table}</code></pre>
<p>The resulting table looks like the following.</p>
<p><img src="../../post/2020-01-18-apa-tables-using-rmarkdown-part-5_files/Screen Shot 2020-01-18 at 11.30.32 AM.png" class="img-fluid" style="width:100.0%"></p>
</section>
<section id="adding-additional-model-level-statistics-into-the-table" class="level3">
<h3 class="anchored" data-anchor-id="adding-additional-model-level-statistics-into-the-table">Adding Additional Model-Level Statistics into the Table</h3>
<p>You may also wish to add other model-level summaries into the table. For example, below I will compute and add the corrected AIC into the table. To do this, use the <code>add.lines=</code> argument in the <code>stargazer()</code> function. This argument takes a list that gives the contents of each cell in the added row. In our example this would be a list including the text to produce in the first cell and then a corrected AIC value for each respective model in the remaining three cells. I also omit the <span class="math inline">\(F\)</span>-statistic in the <code>keep.stat=</code> argument.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load library</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(AICcmodavg)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create table</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="fu">stargazer</span>(</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  lm<span class="fl">.1</span>, lm<span class="fl">.2</span>, lm<span class="fl">.3</span>,</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">"latex"</span>,</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">table.placement =</span> <span class="st">"H"</span>,</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"Three Regression Models Predicting Variation in Six-Year Graduation Rates"</span>,</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">column.labels =</span> <span class="fu">c</span>(<span class="st">"Model A"</span>, <span class="st">"Model B"</span>, <span class="st">"Model C"</span>),</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">colnames =</span> <span class="cn">FALSE</span>,</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">model.numbers =</span> <span class="cn">FALSE</span>,</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">dep.var.caption =</span> <span class="st">" "</span>,</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">dep.var.labels =</span> <span class="st">"Graduation Rate"</span>,</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">covariate.labels =</span> <span class="fu">c</span>(<span class="st">"Public$^a$"</span>, <span class="st">"Median SAT score"</span>, <span class="st">"Tuition"</span>, <span class="st">"Public$^a$ x Median SAT score"</span>, <span class="st">"Public$^a$ x Tuition"</span>),</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">star.cutoffs =</span> <span class="cn">NA</span>,</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">keep.stat =</span> <span class="fu">c</span>(<span class="st">"rsq"</span>),</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">notes =</span> <span class="st">"$^a$0 = Private institution and 1 = Public institution."</span>,</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">notes.align =</span> <span class="st">"l"</span>,</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">add.lines =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">"Corrected AIC"</span>, <span class="fu">round</span>(<span class="fu">AICc</span>(lm<span class="fl">.1</span>), <span class="dv">1</span>), <span class="fu">round</span>(<span class="fu">AICc</span>(lm<span class="fl">.2</span>), <span class="dv">1</span>), <span class="fu">round</span>(<span class="fu">AICc</span>(lm<span class="fl">.3</span>), <span class="dv">1</span>)))</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>After editing the LaTeX syntax to make the same changes as before, we get the following table:</p>
<p><img src="tbl-3.png" class="img-fluid" style="width:100.0%"></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>